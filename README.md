# 🍳 냉장고를 부탁해 (Please Take Care of My Refrigerator)

스마트 냉장고 관리 및 레시피 추천 웹 애플리케이션입니다.
냉장고 속 재료를 효율적으로 관리하고, 남은 재료로 만들 수 있는 최적의 요리를 추천받으세요!

---

## 📅 프로젝트 히스토리

### 🚀 최신 업데이트 (2025.12.21) - "AI & 맞춤형 기능 고도화"
*   **AI OCR 교정 시스템**: SSAFY GMS API(Gemini 2.0 Flash)를 연동하여 오타나 잘린 글자도 똑똑하게 교정합니다. (예: "짜파게" ➔ "짜파게티")
*   **지능형 레시피 추천**: "이 재료로 요리하기" 클릭 시, 실제 냉장고 재료와 레시피의 매칭율을 계산하여 정렬합니다. **부족한 재료**를 목록으로 보여주어 쇼핑 편의성을 높였습니다.
*   **개인화 취향 필터**: 사용자의 프로필 태그(#채식, #다이어트 등)를 분석하여, 고기가 포함된 레시피를 제외하거나 건강식 위주로 자동 필터링합니다.
*   **데이터 정규화 & 확장**: 1,000개 레시피와 1,000여 개의 식재료 DB를 통합하여 매칭 정확도를 극대화했습니다.
*   **협업용 박제(Fixture)**: `python manage.py load_initial_data` 명령어로 언제 어디서든 서버의 완벽한 상태를 복구할 수 있습니다.

---

### ✅ 주요 기능 (2025.12.05 기준 지표)

#### 1. 🥦 스마트한 식재료 관리
*   **다양한 입력 방식**:
    *   🧾 **영수증 스캔 (OCR)**: 영수증을 찍으면 재료명과 수량을 자동으로 인식합니다. (EasyOCR + AI 교정 적용)
    *   ✏️ **직접 입력 & 자동완성**: 1,000여 개의 식재료 DB를 기반으로 합니다.
*   **보관함 관리**:
    *   **카테고리 필터**: 육류, 채소, 과일, 수산물 등 카테고리별 필터링.
    *   **유통기한 알림**: 유통기한 임박(3일 전) 항목 시각적 표시.

#### 2. 👨‍🍳 맞춤형 레시피 추천
*   **"이 재료로 요리하기"**: 내 냉장고에 있는 재료를 기반으로 매칭률이 높은 레시피 우선 추천.
*   **방대한 레시피**: 식품안전나라 API 기반 1,000개의 실제 레시피 데이터.

---

## 🛠 기술 스택
*   **Frontend**: Vue.js 3, Pinia, Vite
*   **Backend**: Django REST Framework (DRF)
*   **AI/ML**: SSAFY GMS(Gemini), EasyOCR
*   **Data**: SQLite, Pandas

---

## 🚀 실행 방법 (초기 세팅)

### 1. 백엔드 (Django)
```bash
cd backend
./venv/Scripts/activate   # Windows
# source venv/bin/activate  # Mac/Linux
pip install -r requirements.txt
python manage.py migrate
python manage.py runserver
```
> 💡 **db.sqlite3가 Git에 포함되어 있어 별도 DB 복구 불필요!**

### 2. 프론트엔드 (Vue.js)
```bash
cd frontend
npm install
npm run dev
```

---

## 📝 상세 업데이트 로그
- **12.21**: AI 텍스트 교정 로직 추가, 외부 엑셀 DB 통합, Fixture 시스템 구축.
- **12.05**: 초기 식재료 DB 구축, 자동완성 기능, UI/UX 개선.

---

## 🔴 실시간 집중 작업 내역 (Current Development)

### ✅ 오늘 완수한 내용
- **OCR 인식 로직 강화**: '대추방울토마토', '코카콜라' 등 가공식품/신선식품 DB 매칭 정확도 향상 (정확 일치 > 포함 일치 > AI 보정).
- **그리드 UI 레이아웃 도입**: 모바일과 PC에서 모두 보기 편한 **바둑판 형태**의 카드 시스템 구축.
- **대량 관리 기능 완성**: 다중 선택 삭제(Bulk Delete) 및 만료된 재료 일괄 정리 기능 추가.
- **레시피 매칭 엔진 고도화**: 재료 이름의 부분 일치를 허용하여 추천 품질과 일치율(%) 표시 정확도 개선.

### 🚩 향후 해결 과제 (To-Do / Feedback)
- **보관함 카드 내 카테고리 태그 렌더링**: 재료명 옆에 카테고리가 다시 정상적으로 보이도록 수정 필요.
- **카테고리 상단 필터링**: 칩 선택 시 목록이 필터링되지 않는 로직 점검.
- **추천 레시피-내 재료 싱크**: 실제 재료를 보유하고 있음에도 간헐적으로 매칭 카운트가 낮게 파싱되는 현상 정밀 튜닝.
- **컴포넌트 스타일 격리**: 전체 UI 업데이트 시 디자인 간섭이 발생하지 않도록 CSS 구조화.

---

## 👩‍💻 개발자
*   **손서영** (Full Stack Developer)
*   **AI Assistant** (Pair Programming Partner 🤖)

---

## 📅 2025.12.21 (오후) 작업 내역

### ✅ 완료된 기능

#### 1. 📅 보관함 달력 뷰
- 보관함에 **목록 / 달력 / 챌린지** 탭 추가
- 달력에 **유통기한 날짜별 재료 이모지** 표시
- **3일 이내 임박 재료**: 빨간 배경으로 강조
- **임박 알림 배너**: "유통기한 임박!" + 활용하기 버튼
- **이번달 만료 목록**: D-Day 형태로 표시

#### 2. 🏆 주간 챌린지 (게이미피케이션)
- **미션 시스템**: 재료 등록, 요리 완료, 유통기한 내 소비, 폐기 0 유지
- **점수 시스템**: 미션별 포인트 획득
- **배지 시스템**: 수집가, 요리사, 에코 히어로, 완벽주의자
- **주간 통계 대시보드**: 등록/요리/소비/만료 현황

#### 3. 🍳 요리 완료 후 재료 조절
- 요리 완료 시 **사용 재료 차감 모달** 표시
- **+/- 버튼**으로 차감량 조절 (단위별 적정 스텝)
- **미보유 재료**: 차감 불가 표시 + 추가하기 버튼
- 미보유 재료 클릭 시 **재료 입력 페이지로 자동 이동** (prefill)

#### 4. 📊 레시피 추천 개선
- **50% 이상 매칭** 레시피만 추천
- **유통기한 임박 재료** 포함 레시피 우선 정렬
- 추천 결과가 적을 때 **AI 셰프 버튼** 인라인 표시

#### 5. 🤖 AI 챗봇 UI 개선
- 플로팅 버튼 **제거**
- 레시피 목록에서 필요할 때만 **모달로 열림**
- 빠른 질문 버튼 (내 재료 추천, 간단 레시피, 다이어트)

#### 6. 🧭 네비게이션 바 개선
- **홈 / 내 보관함 / 내 프로필** 메뉴 구성
- 메인 페이지에서는 스크롤 시 나타남
- 다른 페이지에서는 항상 표시

#### 7. 💡 UX 개선
- 영수증/사진 스캔 버튼에 **도움말 팁** 추가
- 조리 단계에서 개별 시간 제거, **전체 예상 조리시간**만 표시
- 재료 부족 시 **확인 모달** 표시 후 요리 시작

#### 8. 🔧 버그 수정
- 레시피 재료 중복 8개 삭제
- NoneType 에러 수정 (diet_goals, category)
- CSRF 403 에러 수정 (챗봇 API)
- 네비게이션 바 가림 문제 수정 (padding-top)

### 📁 새로 생성된 파일
- `frontend/src/components/CalendarView.vue` - 달력 뷰
- `frontend/src/components/WeeklyChallenge.vue` - 주간 챌린지
- `frontend/src/components/RecipeChatModal.vue` - AI 챗봇 모달
- `backend/fix_recipe_ingredients_batch.py` - 레시피 재료 정리 스크립트

### 🚩 향후 작업
- 레시피 재료 DB 전체 정리 (배치 스크립트로 진행)
- 이메일/푸시 알림 기능
- 요리 기록 저장 및 통계

---

## 📅 2025.12.22 업데이트: AI 아이콘 & 휴지통 & 관리 편의성

### 1. 🤖 AI 기반 식재료 아이콘 (Gemini)
*   **Gemini 2.0 Flash 연동**: 기존에 뭉툭했던 '📦' 아이콘을 모두 실제 식재료에 맞는 이모지(🥬, 🥓, 🧅 등)로 일괄 변환.
*   **스마트 매칭**: "대파" -> 🥬, "삼겹살" -> 🥓 등 시각적으로 직관적인 아이콘 적용.

### 2. 🗑️ 휴지통(Soft Delete) 기능
*   **실수 방지**: 재료 삭제 시 바로 사라지지 않고 휴지통으로 이동.
*   **복구 및 영구 삭제**: 휴지통에서 언제든지 복구하거나 완전히 삭제 가능.
*   **부분 버리기**: 수량이 많은 재료는 **원하는 만큼만** 덜어서 버릴 수 있음 (예: 5개 중 2개만 버림 -> 차감분은 휴지통행).

### 3. ⚙️ 관리 편의성 대폭 개선
*   **UI 명칭 직관화**: [관리] 버튼 -> **[☑️ 선택하기]**로 변경하여 일괄 선택 기능임을 명확화.
*   **상세 카드 관리**:
    *   **단위 퀵 수정**: g, kg, 개, ml 등 **단위 선택 칩(Chip)** UI 추가.
    *   **삭제 UX**: 상세 화면에서도 바로 부분/전체 삭제 가능.
*   **스마트 수량 조절**: 단위(g/ml)에 따라 50씩, (kg/L)는 0.1씩 조절되는 스마트 버튼 적용.
*   **모달 UX**: 버리기 팝업이 항상 최상단에 뜨도록 개선 (`Teleport` 적용).

### 4. 📆 달력 재미 요소
*   **유머러스한 만료 알림**: 만료된 재료가 있는 날짜 클릭 시, "설마 아직 안 버리고..." 같은 위트 있는 메시지와 함께 **원클릭 정리 버튼** 제공.

---

## 📅 2025.12.22 (오후) 업데이트: 아이콘 정교화 & UI/UX 대개편

### 1. 🎨 커스텀 픽셀 아트 아이콘 시스템
#### 아이콘 추출 및 정리
*   **170개 커스텀 아이콘**: 픽셀 아트 스프라이트 시트에서 개별 아이콘 추출 (4배 업스케일)
*   **수동 네이밍**: 사용자가 직접 170개 파일에 정확한 한글 이름 지정
*   **지능형 우선순위 시스템**:
    - 기본 재료(계란, 우유, 사과 등): 깔끔한 이모지 우선 🥚🥛🍎
    - 세부 구분 필요(대파, 청경채 등): 커스텀 픽셀 아트 우선
*   **중복 해결**: "숙주"와 "숙주나물" 마스터 통합, "콩나물" 아이콘 공유

#### 아이콘 적용 범위
*   **보관함 카드**: 재료 목록, 달력 뷰, 챌린지 뷰
*   **입력 페이지**: 영수증/촬영/직접입력 시 자동완성 드롭다운
*   **레시피 상세**: 필요 재료 목록

### 2. 🎀 파스텔 픽셀 테마 전면 적용
#### 디자인 컨셉
*   **색상 팔레트**: 파스텔 핑크(#FFB3D9), 하늘색(#A8D8FF), 부드러운 옐로우
*   **픽셀 아트 효과**: 레트로 게임 스타일 그림자 (4px 4px 0)
*   **배경**: 도트 패턴 + 그라디언트 (몽환적 분위기)

#### 적용된 UI 컴포넌트
*   **전역 CSS** (`main.css`):
    - 카와이 버튼 스타일 (픽셀 셰도우)
    - 파스텔 그라디언트 배경
    - 폼 인풋 테두리 색상
*   **네비게이션 바**:
    - 슬림화 (56px 높이)
    - 버튼 박스 제거, 이모티콘만 표시
    - drop-shadow로 클릭 효과
*   **모든 페이지 헤더**: 파스텔 그라디언트 적용

### 3. 📐 중앙 정렬 레이아웃 시스템
#### 문제점
*   기존: 컨텐츠가 화면 전체 너비로 과도하게 퍼짐
*   해결: 모든 페이지에 `max-width: 900px` + `margin: 0 auto` 적용

#### 수정된 페이지
*   **PantryView** (보관함):
    - 헤더, 툴바, 카테고리 칩, 재료 그리드 모두 중앙 정렬
    - 네비바 바로 아래 붙이기 (`top: 56px`)
*   **IngredientInputView** (재료 입력):
    - 카드 3개(영수증/촬영/직접입력) 중앙 정렬
    - 헤더 여백 제거
*   **RecipeListView** (레시피 목록):
    - 검색바, 추천 히어로, 레시피 그리드 중앙 정렬
    - 파스텔 핑크 그라디언트 적용
*   **ProfileView** (프로필):
    - 통계 카드에 아이콘 추가
    - 파스텔 테마 일관성 유지

### 4. 📱 반응형 웹 디자인 강화
*   **Container 시스템**:
    - Desktop: `max-width: 900px`
    - Tablet: `max-width: 100%`, `padding: 0 16px`
    - Mobile: 1열 그리드, 터치 친화적 간격
*   **Grid 자동 조정**:
    - Desktop: `minmax(280px, 1fr)`
    - Mobile: `minmax(150px, 1fr)`

### 5. 🔧 세부 개선 사항
*   **카드 반짝이 제거**: 입력 카드의 `::before` 이모티콘 제거
*   **색상 일관성**: 모든 버튼과 링크에 테마 변수 적용
*   **아이콘 렌더링**: `image-rendering: pixelated`로 선명도 향상

### 📁 새로 생성된 스크립트
*   `split_additional_icons.py` - 추가 스프라이트 시트 분할
*   `sync_icons_db.py` - 파일명 기반 DB 동기화
*   `correct_icon_priority.py` - 이모지 vs 이미지 우선순위 적용
*   `consolidate_sprouts.py` - 숙주/숙주나물 중복 제거

### 🎯 달성한 결과
*   **170개 식재료**에 맞춤 아이콘/이모지 적용
*   **전 페이지** 파스텔 픽셀 테마 통일
*   **모바일 최적화** 완료
*   **중앙 정렬 레이아웃**으로 가독성 향상

---

## 📊 프로젝트 현황 (2025.12.22 기준)
*   **레시피 DB**: 1,000개+
*   **식재료 마스터**: 974개
*   **커스텀 아이콘**: 170개
*   **코드 라인 수**: Frontend ~15,000 lines, Backend ~8,000 lines

---

## 📞 문의
프로젝트 관련 문의사항은 이슈로 남겨주세요!
